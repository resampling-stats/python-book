<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.1">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>11&nbsp; Probability Theory, Part 2: Compound Probability – Resampling statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./probability_theory_3.html" rel="next">
<link href="./more_sampling_tools.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="text/javascript">
  $(document).ready(function() {
    $("table").addClass('lightable-paper lightable-striped lightable-hover')
  });
</script>


<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="font-awesome.min.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./probability_theory_2_compound.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Probability Theory, Part 2: Compound Probability</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Resampling statistics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface_third.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface to the third edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface_second.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface to the second edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling_method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The resampling method</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./what_is_probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">What is probability?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about_technology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introducing Python and the Jupyter notebook</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling_with_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling with code</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling_with_code2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">More resampling with code</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampling_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tools for samples and sampling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_1a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Probability Theory, Part 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_1b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Probability Theory Part I (continued)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./more_sampling_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Two puzzles and more tools</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_2_compound.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Probability Theory, Part 2: Compound Probability</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Probability Theory, Part 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_4_finite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Probability Theory, Part 4: Estimating Probabilities from Finite Universes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampling_variability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">On Variability in Sampling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./monte_carlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Procedures of Monte Carlo Simulation (and Resampling)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./standard_scores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Ranks, Quantiles and Standard Scores</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference_ideas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">The Basic Ideas in Statistical Inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Statistical Inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./point_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Point Estimation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./framing_questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Framing Statistical Questions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_counts_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Hypothesis-Testing with Counted Data, Part 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./significance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">The Concept of Statistical Significance in Testing Hypotheses</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_counts_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">The Statistics of Hypothesis-Testing with Counted Data, Part 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_measured.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">The Statistics of Hypothesis-Testing With Measured Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_procedures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">General Procedures for Testing Hypotheses</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confidence_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Confidence Intervals, Part 1: Assessing the Accuracy of Samples</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confidence_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Confidence Intervals, Part 2: The Two Approaches to Estimating Confidence Intervals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reliability_average.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Some Last Words About the Reliability of Sample Averages</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlation_causation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Correlation and Causation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_big_sample.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">How Large a Sample?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayes_simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Bayesian Analysis by Simulation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise_solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Exercise Solutions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./acknowlegements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Acknowledgements</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./technical_note.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Technical Note to the Professional Reader</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">11.1</span> Introduction</a></li>
  <li><a href="#sec-one-pair" id="toc-sec-one-pair" class="nav-link" data-scroll-target="#sec-one-pair"><span class="header-section-number">11.2</span> Introducing a poker problem: one pair (two of a kind)</a></li>
  <li><a href="#a-first-approach-to-the-one-pair-problem-with-code" id="toc-a-first-approach-to-the-one-pair-problem-with-code" class="nav-link" data-scroll-target="#a-first-approach-to-the-one-pair-problem-with-code"><span class="header-section-number">11.3</span> A first approach to the one-pair problem with code</a></li>
  <li><a href="#sec-shuffling-deck" id="toc-sec-shuffling-deck" class="nav-link" data-scroll-target="#sec-shuffling-deck"><span class="header-section-number">11.4</span> Shuffling the deck with Python</a>
  <ul class="collapse">
  <li><a href="#a-first-pass-computer-solution-to-the-one-pair-problem" id="toc-a-first-pass-computer-solution-to-the-one-pair-problem" class="nav-link" data-scroll-target="#a-first-pass-computer-solution-to-the-one-pair-problem"><span class="header-section-number">11.4.1</span> A first-pass computer solution to the one-pair problem</a></li>
  </ul></li>
  <li><a href="#finding-exactly-one-pair-using-code" id="toc-finding-exactly-one-pair-using-code" class="nav-link" data-scroll-target="#finding-exactly-one-pair-using-code"><span class="header-section-number">11.5</span> Finding exactly one pair using code</a></li>
  <li><a href="#finding-number-of-repeats-using" id="toc-finding-number-of-repeats-using" class="nav-link" data-scroll-target="#finding-number-of-repeats-using"><span class="header-section-number">11.6</span> Finding number of repeats using <code>np.bincount</code></a></li>
  <li><a href="#looking-for-hands-with-exactly-one-pair" id="toc-looking-for-hands-with-exactly-one-pair" class="nav-link" data-scroll-target="#looking-for-hands-with-exactly-one-pair"><span class="header-section-number">11.7</span> Looking for hands with exactly one pair</a></li>
  <li><a href="#two-more-tntroductory-poker-problems" id="toc-two-more-tntroductory-poker-problems" class="nav-link" data-scroll-target="#two-more-tntroductory-poker-problems"><span class="header-section-number">11.8</span> Two more tntroductory poker problems</a></li>
  <li><a href="#the-concepts-of-replacement-and-non-replacement" id="toc-the-concepts-of-replacement-and-non-replacement" class="nav-link" data-scroll-target="#the-concepts-of-replacement-and-non-replacement"><span class="header-section-number">11.9</span> The concepts of replacement and non-replacement</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-compound-probability" class="quarto-section-identifier"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Probability Theory, Part 2: Compound Probability</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">11.1</span> Introduction</h2>
<p>In this chapter we will deal with what are usually called “probability problems” rather than the “statistical inference problems” discussed in later chapters. The difference is that for probability problems we begin with a knowledge of the properties of the universe with which we are working. (See <a href="probability_theory_1a.html#sec-what-is-resampling" class="quarto-xref"><span>Section 8.9</span></a> on the definition of resampling.)</p>
<p>We start with some basic problems in probability. To make sure we do know the properties of the universe we are working with, we start with poker, and a pack of cards. Working with some poker problems, we rediscover the fundamental distinction between sampling <em>with</em> and <em>without</em> replacement.</p>
</section>
<section id="sec-one-pair" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="sec-one-pair"><span class="header-section-number">11.2</span> Introducing a poker problem: one pair (two of a kind)</h2>
<p>What is the chance that the first five cards chosen from a deck of 52 (bridge/poker) cards will contain two (and only two) cards of the same denomination (two 3’s for example)? (Please forgive the rather sterile unrealistic problems in this and the other chapters on probability. They reflect the literature in the field for 300 years. We’ll get more realistic in the statistics chapters.)</p>
<p>We shall estimate the odds the way that gamblers have estimated gambling odds for thousands of years. First, check that the deck is a standard deck and is not missing any cards. (Overlooking such small but crucial matters often leads to errors in science.) Shuffle thoroughly until you are satisfied that the cards are randomly distributed. (It is surprisingly hard to shuffle well.) Then deal five cards, and mark down whether the hand does or does not contain a pair of the same denomination.</p>
<p>At this point, we must decide whether three of a kind, four of a kind or two pairs meet our criterion for a pair. Since our criterion is “two and only two,” we decide <em>not</em> to count them.</p>
<p>Then replace the five cards in the deck, shuffle, and deal again. Again mark down whether the hand contains one pair of the same denomination. Do this many times. Then count the number of hands with one pair, and figure the proportion (as a percentage) of all hands.</p>
<p><a href="#tbl-one-pair" class="quarto-xref">Table&nbsp;<span>11.1</span></a> has the results of 25 hands of this procedure.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-one-pair" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-one-pair-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;11.1: Results of 25 hands for the problem “one pair”
</figcaption>
<div aria-describedby="tbl-one-pair-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th>Hand</th>
<th>Card 1</th>
<th>Card 2</th>
<th>Card 3</th>
<th>Card 4</th>
<th>Card 5</th>
<th>One pair?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>King ♢</td>
<td>King ♠</td>
<td>Queen ♠</td>
<td>10 ♢</td>
<td>6 ♠</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>2</td>
<td>8 ♢</td>
<td>Ace ♢</td>
<td>4 ♠</td>
<td>10 ♢</td>
<td>3 ♣</td>
<td>No</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4 ♢</td>
<td>5 ♣</td>
<td>Ace ♢</td>
<td>Queen ♡</td>
<td>10 ♠</td>
<td>No</td>
</tr>
<tr class="even">
<td>4</td>
<td>3 ♡</td>
<td>Ace ♡</td>
<td>5 ♣</td>
<td>3 ♢</td>
<td>Jack ♢</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>5</td>
<td>6 ♠</td>
<td>King ♣</td>
<td>6 ♢</td>
<td>3 ♣</td>
<td>3 ♡</td>
<td>No</td>
</tr>
<tr class="even">
<td>6</td>
<td>Queen ♣</td>
<td>7 ♢</td>
<td>Jack ♠</td>
<td>5 ♡</td>
<td>8 ♡</td>
<td>No</td>
</tr>
<tr class="odd">
<td>7</td>
<td>9 ♣</td>
<td>4 ♣</td>
<td>9 ♠</td>
<td>Jack ♣</td>
<td>5 ♠</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>8</td>
<td>3 ♠</td>
<td>3 ♣</td>
<td>3 ♡</td>
<td>5 ♠</td>
<td>5 ♢</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Queen ♢</td>
<td>4 ♠</td>
<td>Queen ♣</td>
<td>6 ♡</td>
<td>4 ♢</td>
<td>No</td>
</tr>
<tr class="even">
<td>10</td>
<td>Queen ♠</td>
<td>3 ♣</td>
<td>7 ♠</td>
<td>7 ♡</td>
<td>8 ♢</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>11</td>
<td>8 ♡</td>
<td>9 ♠</td>
<td>7 ♢</td>
<td>8 ♠</td>
<td>Ace ♡</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>12</td>
<td>Ace ♠</td>
<td>9 ♡</td>
<td>4 ♣</td>
<td>2 ♠</td>
<td>Ace ♢</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>13</td>
<td>4 ♡</td>
<td>3 ♣</td>
<td>Ace ♢</td>
<td>9 ♡</td>
<td>5 ♡</td>
<td>No</td>
</tr>
<tr class="even">
<td>14</td>
<td>10 ♣</td>
<td>7 ♠</td>
<td>8 ♣</td>
<td>King ♣</td>
<td>4 ♢</td>
<td>No</td>
</tr>
<tr class="odd">
<td>15</td>
<td>Queen ♣</td>
<td>8 ♠</td>
<td>Queen ♠</td>
<td>8 ♣</td>
<td>5 ♣</td>
<td>No</td>
</tr>
<tr class="even">
<td>16</td>
<td>King ♡</td>
<td>10 ♣</td>
<td>Jack ♠</td>
<td>10 ♢</td>
<td>10 ♡</td>
<td>No</td>
</tr>
<tr class="odd">
<td>17</td>
<td>Queen ♠</td>
<td>Queen ♡</td>
<td>Ace ♡</td>
<td>King ♢</td>
<td>7 ♡</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>18</td>
<td>5 ♢</td>
<td>6 ♡</td>
<td>Ace ♡</td>
<td>4 ♡</td>
<td>6 ♢</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>19</td>
<td>3 ♠</td>
<td>5 ♡</td>
<td>2 ♢</td>
<td>King ♣</td>
<td>9 ♡</td>
<td>No</td>
</tr>
<tr class="even">
<td>20</td>
<td>8 ♠</td>
<td>Jack ♢</td>
<td>7 ♣</td>
<td>10 ♡</td>
<td>3 ♡</td>
<td>No</td>
</tr>
<tr class="odd">
<td>21</td>
<td>5 ♢</td>
<td>4 ♠</td>
<td>Jack ♡</td>
<td>2 ♠</td>
<td>King ♠</td>
<td>No</td>
</tr>
<tr class="even">
<td>22</td>
<td>5 ♢</td>
<td>4 ♢</td>
<td>Jack ♣</td>
<td>King ♢</td>
<td>2 ♠</td>
<td>No</td>
</tr>
<tr class="odd">
<td>23</td>
<td>King ♡</td>
<td>King ♠</td>
<td>6 ♡</td>
<td>2 ♠</td>
<td>5 ♣</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>24</td>
<td>8 ♠</td>
<td>9 ♠</td>
<td>6 ♣</td>
<td>Ace ♣</td>
<td>5 ♢</td>
<td>No</td>
</tr>
<tr class="odd">
<td>25</td>
<td>Ace ♢</td>
<td>7 ♠</td>
<td>4 ♡</td>
<td>9 ♢</td>
<td>9 ♠</td>
<td>Yes</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>% Yes</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>44%</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<p>In this series of 25 experiments, 44 percent of the hands contained one pair, and therefore 0.44 is our estimate (for the time being) of the probability that one pair will turn up in a poker hand. But we must notice that this estimate is based on only 25 hands, and therefore might well be fairly far off the mark (as we shall soon see).</p>
<p>This experimental “resampling” estimation does not require a deck of cards. For example, one might create a 52-sided die, one side for each card in the deck, and roll it five times to get a “hand.” But note one important part of the procedure: No single “card” is allowed to come up twice in the same set of five spins, just as no single card can turn up twice or more in the same hand. If the same “card” did turn up twice or more in a dice experiment, one could pretend that the roll had never taken place; this procedure is necessary to make the dice experiment analogous to the actual card-dealing situation under investigation. Otherwise, the results will be slightly in error. This type of sampling is “sampling without replacement,” because each card is <em>not replaced</em> in the deck prior to dealing the next card (that is, prior to the end of the hand).</p>
</section>
<section id="a-first-approach-to-the-one-pair-problem-with-code" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="a-first-approach-to-the-one-pair-problem-with-code"><span class="header-section-number">11.3</span> A first approach to the one-pair problem with code</h2>
<p>We could also approach this problem using random numbers from the computer to simulate the values.</p>
<p>Let us first make some numbers from which to sample. We want to simulate a deck of playing cards analogous to the real cards we used previously. We don’t need to simulate all the features of a deck, but only the features that matter for the problem at hand. In our case, the feature that matters is the face value. We require a deck with four “1”s, four “2”s, etc., up to four “13”s, where 1 is an Ace, and 13 is a King. The suits don’t matter for our present purposes.</p>
<p>We first first make an array to represent the face values in one suit.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Card values 1 through 13 (1 up to, not including 14).</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>one_suit <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">14</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>one_suit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13])</code></pre>
</div>
</div>
<p>We have the face values for one suit, but we need the face values for whole deck of cards — four suits. We do this by making a new array that consists of four repeats of <code>one_suit</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the one_suit array four times</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>deck <span class="op">=</span> np.repeat(one_suit, <span class="dv">4</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>deck</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ 1,  1,  1,  1,  2,  2,  2,  2,  3,  3,  3,  3,  4,  4,  4,  4,  5,
        5,  5,  5,  6,  6,  6,  6,  7,  7,  7,  7,  8,  8,  8,  8,  9,  9,
        9,  9, 10, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 13,
       13])</code></pre>
</div>
</div>
</section>
<section id="sec-shuffling-deck" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="sec-shuffling-deck"><span class="header-section-number">11.4</span> Shuffling the deck with Python</h2>
<p>At this point we have a complete deck in the variable <code>deck</code> . But that “deck” is <span class="python">ordered by value, first ones (Aces) then 2s and so on</span>. If we do not shuffle the deck, the results will be predictable. Therefore, we would like to select five of these “cards” (52 values) at random. There are two ways of doing this. The first is to use the ’rnd.choice`]{.python} tool in the familiar way, to choose 5 values at random from this strictly ordered deck. We want to draw these cards <em>without replacement</em> (of which more later). <em>Without replacement</em> means that once we have drawn a particular value, we cannot draw that value a second time — just as you cannot get the same card twice in a hand when the dealer deals you a hand of five cards.</p>
<div class="python">
<p>So far, each of our uses of <code>rnd.choice</code> has done sampling <em>with replacement</em>, where you <em>can</em> get the same item more than once in a particular sample. Here we need <em>without replacement</em>. <code>rnd.choice</code> has an argument you can send, called <code>replace</code>, to tell it whether to replace values when drawing the sample. We have not used that argument so far, because the default is <code>True</code> — sampling <em>with replacement</em>. Here we need to use the argument — <code>replace=False</code> — to get sampling <em>without replacement</em>.</p>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One hand, sampling from the deck without replacement.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>hand <span class="op">=</span> rnd.choice(deck, size<span class="op">=</span><span class="dv">5</span>, replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>hand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ 9,  4, 11,  9, 13])</code></pre>
</div>
</div>
<p>The above is one way to get a random hand of five cards from the deck. Another way is to use <span class="python">the <code>rnd.permuted</code> function</span> to shuffle the whole <code>deck</code> of 52 “cards” into a random order, just as a dealer would shuffle the deck before dealing. Then we could take — for example — the first five cards from the shuffled deck to give a random hand. See <a href="probability_theory_1a.html#sec-shuffling" class="quarto-xref"><span>Section 8.14</span></a> for more on <span class="python"><code>rnd.permuted</code></span>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the whole 52 card deck.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> rnd.permuted(deck)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The "cards" are now in random order.</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>shuffled</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([12, 13,  2,  9,  6,  7,  7,  7, 11, 13,  2,  8,  6,  9,  4,  1,  5,
       12, 11,  9,  1,  2,  4,  2,  3,  3, 11,  6,  4, 11,  8,  7, 13,  8,
       12,  5,  4,  5,  9,  8,  5,  6,  3,  1,  1, 12,  3, 13, 10, 10, 10,
       10])</code></pre>
</div>
</div>
<p>Now we can get our <code>hand</code> by taking the first five cards from the <code>deck</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the first five "cards" from the shuffled deck.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>hand <span class="op">=</span> shuffled[:<span class="dv">5</span>]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>hand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([12, 13,  2,  9,  6])</code></pre>
</div>
</div>
<p>You have seen that we can use one of two procedures to a get random sample of five cards from <code>deck</code>, drawn without replacement:</p>
<ol type="1">
<li>Using <span class="python"><code>rnd.choice</code> with <code>size=5</code> and <code>replace=False</code></span> to take the random sample directly from <code>deck</code>, or</li>
<li>shuffling the entire <code>deck</code> and then taking the first five “cards” from the result of the shuffle.</li>
</ol>
<p>Either is a valid way of getting five cards at random from the <code>deck</code>. It’s up to us which to choose — we slightly prefer to shuffle and take the first five, because it is more like the physical procedure of shuffling the deck and dealing, but which you prefer, is up to you.</p>
<section id="a-first-pass-computer-solution-to-the-one-pair-problem" class="level3" data-number="11.4.1">
<h3 data-number="11.4.1" class="anchored" data-anchor-id="a-first-pass-computer-solution-to-the-one-pair-problem"><span class="header-section-number">11.4.1</span> A first-pass computer solution to the one-pair problem</h3>
<p>Choosing the shuffle deal way, the cell to generate one hand is:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>shuffled <span class="op">=</span> rnd.permuted(deck)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>hand <span class="op">=</span> shuffled[:<span class="dv">5</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>hand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ 7,  4, 12,  1,  2])</code></pre>
</div>
</div>
<p>Without doing anything further, we could run this cell many times, and each time, we could note down whether the particular <code>hand</code> had exactly one pair or not.</p>
<p><a href="#tbl-one-pair-numbers" class="quarto-xref">Table&nbsp;<span>11.2</span></a> has the result of running that procedure 25 times:</p>
<div class="cell" data-layout-align="center">
<div id="tbl-one-pair-numbers" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-one-pair-numbers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;11.2: Results of 25 hands using random numbers
</figcaption>
<div aria-describedby="tbl-one-pair-numbers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th>Hand</th>
<th>Card 1</th>
<th>Card 2</th>
<th>Card 3</th>
<th>Card 4</th>
<th>Card 5</th>
<th>One pair?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>10</td>
<td>5</td>
<td>7</td>
<td>12</td>
<td>12</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>2</td>
<td>6</td>
<td>9</td>
<td>2</td>
<td>6</td>
<td>8</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>3</td>
<td>11</td>
<td>8</td>
<td>9</td>
<td>6</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>4</td>
<td>8</td>
<td>10</td>
<td>2</td>
<td>11</td>
<td>12</td>
<td>No</td>
</tr>
<tr class="odd">
<td>5</td>
<td>1</td>
<td>10</td>
<td>11</td>
<td>8</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="even">
<td>6</td>
<td>8</td>
<td>10</td>
<td>3</td>
<td>9</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="odd">
<td>7</td>
<td>10</td>
<td>9</td>
<td>13</td>
<td>1</td>
<td>9</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>8</td>
<td>13</td>
<td>4</td>
<td>3</td>
<td>11</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="odd">
<td>9</td>
<td>7</td>
<td>1</td>
<td>4</td>
<td>13</td>
<td>6</td>
<td>No</td>
</tr>
<tr class="even">
<td>10</td>
<td>11</td>
<td>5</td>
<td>11</td>
<td>8</td>
<td>4</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>11</td>
<td>7</td>
<td>10</td>
<td>7</td>
<td>13</td>
<td>9</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>12</td>
<td>2</td>
<td>11</td>
<td>4</td>
<td>7</td>
<td>8</td>
<td>No</td>
</tr>
<tr class="odd">
<td>13</td>
<td>12</td>
<td>1</td>
<td>3</td>
<td>10</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="even">
<td>14</td>
<td>10</td>
<td>2</td>
<td>11</td>
<td>8</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>15</td>
<td>1</td>
<td>6</td>
<td>12</td>
<td>12</td>
<td>5</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>16</td>
<td>4</td>
<td>8</td>
<td>7</td>
<td>8</td>
<td>6</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>17</td>
<td>7</td>
<td>10</td>
<td>9</td>
<td>4</td>
<td>4</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>18</td>
<td>3</td>
<td>4</td>
<td>11</td>
<td>11</td>
<td>12</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>19</td>
<td>10</td>
<td>12</td>
<td>2</td>
<td>13</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>20</td>
<td>9</td>
<td>6</td>
<td>4</td>
<td>13</td>
<td>4</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>21</td>
<td>7</td>
<td>3</td>
<td>3</td>
<td>9</td>
<td>7</td>
<td>No</td>
</tr>
<tr class="even">
<td>22</td>
<td>13</td>
<td>4</td>
<td>10</td>
<td>5</td>
<td>8</td>
<td>No</td>
</tr>
<tr class="odd">
<td>23</td>
<td>13</td>
<td>2</td>
<td>9</td>
<td>8</td>
<td>8</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>24</td>
<td>5</td>
<td>12</td>
<td>7</td>
<td>11</td>
<td>8</td>
<td>No</td>
</tr>
<tr class="odd">
<td>25</td>
<td>7</td>
<td>5</td>
<td>8</td>
<td>10</td>
<td>7</td>
<td>Yes</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>% Yes</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>48%</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="finding-exactly-one-pair-using-code" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="finding-exactly-one-pair-using-code"><span class="header-section-number">11.5</span> Finding exactly one pair using code</h2>
<p>Thus far we have had to look ourselves at the set of cards, or at the numbers, and decide if there was exactly one pair. We would like the computer to do this for us. Let us stay with the numbers we generated above by dealing the random <code>hand</code> from the <code>deck</code> of numbers. To find pairs, we will go through the following procedure:</p>
<ul>
<li>For each possible value (1 through 13), count the number of times each value has occurred in <code>hand</code>. Call the result of this calculation — <code>repeat_nos</code>.</li>
<li>Select <code>repeat_nos</code> values equal to 2;</li>
<li>Count the number of “2” values in <code>repeat_nos</code>. This the number of pairs, and excludes three of a kind or four a kind.</li>
<li>If the number of pairs is exactly one, label the <code>hand</code> as “Yes”, otherwise label it as “No”.</li>
</ul>
</section>
<section id="finding-number-of-repeats-using" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="finding-number-of-repeats-using"><span class="header-section-number">11.6</span> Finding number of repeats using <code>np.bincount</code></h2>
<p>Consider the following 5-card “hand” of values:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>hand <span class="op">=</span> np.array([<span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">7</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This hand represents a pair of 5s and a pair of 7s.</p>
<p>We want to detect the number of repeats for each possible card value, 1 through 13. Let’s say we are looking for 5s. We can detect which of the values are equal to 5 by making a Boolean array, where there is <code>True</code> for a value equal to 5, and <code>False</code> otherwise:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>is_5 <span class="op">=</span> (hand <span class="op">==</span> <span class="dv">5</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>is_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ True, False,  True, False, False])</code></pre>
</div>
</div>
<p>We can then count the number of 5s with:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(is_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.int64(2)</code></pre>
</div>
</div>
<p>In one cell:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>number_of_5s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">5</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>number_of_5s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.int64(2)</code></pre>
</div>
</div>
<p>We could do this laborious task for every possible card value (1 through 13):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>number_of_1s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">1</span>)  <span class="co"># Number of aces in hand</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>number_of_2s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">2</span>)  <span class="co"># Number of 2s in hand</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>number_of_3s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">3</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>number_of_4s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">4</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>number_of_5s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">5</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>number_of_6s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">6</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>number_of_7s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">7</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>number_of_8s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">8</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>number_of_9s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">9</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>number_of_10s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">10</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>number_of_11s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">11</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>number_of_12s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">12</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>number_of_13s <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">13</span>)  <span class="co"># Number of Kings in hand.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Above, we store the result for each card in a separate variable; this is inconvenient, because we would have to go through each variable checking for a pair (a value of 2). It would be more convenient to store these results in an array. One way to do that would be to store the result for card value 1 at position (index<span class="python">, offset</span>) 1, the result for value 2 at position 2, and so on, like this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make array length 14.  We don't use position (offset) 0, and the last</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># position (offset) in this array will be 13.</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>repeat_nos <span class="op">=</span> np.zeros(<span class="dv">14</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">1</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">1</span>)  <span class="co"># Number of aces in hand</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">2</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">2</span>)  <span class="co"># Number of 2s in hand</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">3</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">3</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">4</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">4</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">5</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">5</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">6</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">6</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">7</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">7</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">8</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">8</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">9</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">9</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">10</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">10</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">11</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">11</span>)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">12</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">12</span>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>repeat_nos[<span class="dv">13</span>] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> <span class="dv">13</span>)  <span class="co"># Number of Kings in hand.</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>repeat_nos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([0., 0., 0., 0., 1., 2., 0., 2., 0., 0., 0., 0., 0., 0.])</code></pre>
</div>
</div>
<p>You may recognize all this repetitive typing as a good sign we could use a <code>for</code> loop to do the work — er — for us.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>repeat_nos <span class="op">=</span> np.zeros(<span class="dv">14</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">14</span>):  <span class="co"># Set i to be first 0, then 1, ... through 13.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    repeat_nos[i] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> i)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>repeat_nos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([0., 0., 0., 0., 1., 2., 0., 2., 0., 0., 0., 0., 0., 0.])</code></pre>
</div>
</div>
<div class="python">
<p>Notice that we started our loop by checking for values equal to 0, and then values equal to 1 and so on. By our definition of the deck, no card can have value 0, so the first time through this loop, we will always get a count of 0. We could have saved ourselves a tiny amount of computing time if we had missed out that pointless step of checking 0, by using <code>for i in range(1, 14):</code> instead. In this case, we think the code is a little bit neater to read if we leave in the default start at 0, at a tiny cost in wasted computer effort.</p>
</div>
<p>In our particular <code>hand</code>, after we have done the count for 7s, we will always get 0 for card values 8, 9 … 13, because 7 was the highest card (maximum value) for our particular <code>hand</code>. As you might expect, there is a <span class="python">a Numpy</span> function <span class="python"><code>np.max</code></span> that will quickly tell us the maximum value in the hand:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">max</span>(hand)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.int64(7)</code></pre>
</div>
</div>
<p>We can use <span class="python"><code>np.max</code></span> to make our loop more efficient, by stopping our checks when we’ve reached the maximum value, like this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>max_value <span class="op">=</span> np.<span class="bu">max</span>(hand)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Only make an array large enough to house counts for the max value.</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>repeat_nos <span class="op">=</span> np.zeros(max_value <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(max_value <span class="op">+</span> <span class="dv">1</span>):  <span class="co"># Set i to 0, then 1 ... through max_value</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    repeat_nos[i] <span class="op">=</span> np.<span class="bu">sum</span>(hand <span class="op">==</span> i)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>repeat_nos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([0., 0., 0., 0., 1., 2., 0., 2.])</code></pre>
</div>
</div>
<p>In fact, this is exactly what the function <span class="python"><code>np.bincount</code></span> does, so we can use that function instead of our loop, to do the same job:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>repeat_nos <span class="op">=</span> np.bincount(hand)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>repeat_nos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([0, 0, 0, 0, 1, 2, 0, 2])</code></pre>
</div>
</div>
</section>
<section id="looking-for-hands-with-exactly-one-pair" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="looking-for-hands-with-exactly-one-pair"><span class="header-section-number">11.7</span> Looking for hands with exactly one pair</h2>
<p>Now we have <code>repeat_nos</code>, we can proceed with the rest of the steps above.</p>
<p>We can count the number of cards that have exactly two repeats:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(repeat_nos <span class="op">==</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([False, False, False, False, False,  True, False,  True])</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>n_pairs <span class="op">=</span> np.<span class="bu">sum</span>(repeat_nos <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>n_pairs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.int64(2)</code></pre>
</div>
</div>
<p>The hand is of interest to us only if the number of pairs is exactly 1:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check whether there is exactly one pair in this hand.</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>n_pairs <span class="op">==</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.False_</code></pre>
</div>
</div>
<p>We now have the machinery to use Python for all the logic in simulating multiple hands, and checking for exactly one pair.</p>
<p>Let’s do that, and use Python to do the full job of dealing many hands and finding pairs in each one. We repeat the procedure above using a <code>for</code> loop. The <code>for</code> loop commands the program to do ten thousand repeats of the statements in the “loop” <span class="python">(indented statements)</span>.</p>
<p>In the <em>body</em> of the loop (the part that gets repeated for each trial) we:</p>
<ul>
<li>Shuffle the <code>deck</code>.</li>
<li>Deal ourselves a new <code>hand</code>.</li>
<li>Calculate the <code>repeat_nos</code> <em>for this new hand</em>.</li>
<li>Calculate the number of pairs from <code>repeat_nos</code>; store this as <code>n_pairs</code>.</li>
<li>Put <code>n_pairs</code> for this repetition into the correct place in the scoring array <code>z</code>.</li>
</ul>
<p>With that we end a single trial, and go back to the beginning, until we have done this 10000 times.</p>
<p>When those 10000 repetitions are over, the computer moves on to count (<code>sum</code>) the number of “1’s” in the score-keeping array <code>z</code>, each “1” indicating a hand with exactly one pair. We store this count at location <code>k</code>. We divide <code>k</code> by 10000 to get the <em>proportion</em> of hands that had one pair, and we <span class="python"><code>print</code></span> the result of <code>k</code> to the screen.</p>
<div class="notebook" name="one_pair" title="One pair">
<p>Start of <code>one_pair</code> notebook</p>
<div class="nb-links">
<a class="notebook-link" href="notebooks/one_pair.ipynb">Download notebook</a>
<a class="interact-button" href="https://resampling-stats.github.io/python-book/interact/lab/index.html?path=one_pair.ipynb">Interact</a>
</div>

<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>rnd <span class="op">=</span> np.random.default_rng()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bucket (vector) called a with four "1's," four "2's," four "3's,"</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># etc., to represent a deck of cards</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>one_suit <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">14</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>one_suit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13])</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat values for one suit four times to make a 52 card deck of values.</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>deck <span class="op">=</span> np.repeat(one_suit, <span class="dv">4</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>deck</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([ 1,  1,  1,  1,  2,  2,  2,  2,  3,  3,  3,  3,  4,  4,  4,  4,  5,
        5,  5,  5,  6,  6,  6,  6,  7,  7,  7,  7,  8,  8,  8,  8,  9,  9,
        9,  9, 10, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 13,
       13])</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Array to store result of each trial.</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> np.zeros(<span class="dv">10000</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the following steps 10000 times</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10000</span>):</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Shuffle the deck</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> rnd.permuted(deck)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take the first five cards to make a hand.</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    hand <span class="op">=</span> shuffled[:<span class="dv">5</span>]</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># How many pairs?</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Counts for each card rank.</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    repeat_nos <span class="op">=</span> np.bincount(hand)</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    n_pairs <span class="op">=</span> np.<span class="bu">sum</span>(repeat_nos <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Keep score of # of pairs</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    z[i] <span class="op">=</span> n_pairs</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># End loop, go back and repeat</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a><span class="co"># How often was there 1 pair?</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> np.<span class="bu">sum</span>(z <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to proportion.</span></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>kk <span class="op">=</span> k <span class="op">/</span> <span class="dv">10000</span></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result.</span></span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(kk)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.4191</code></pre>
</div>
</div>
<p>End of <code>one_pair</code> notebook</p>
</div>
<p>In one run of the program, the result in <code>kk</code> was 0.419, so our estimate would be that the probability of a single pair is 0.419.</p>
<p>How accurate are these resampling estimates? The accuracy depends on the <em>number of hands</em> we deal — the more hands, the greater the accuracy. If we were to examine millions of hands, 42 percent would contain a pair each; that is, the chance of getting a pair in the long run is 42 percent. It turns out the estimate of 48 percent based on 25 hands in <a href="#tbl-one-pair" class="quarto-xref">Table&nbsp;<span>11.1</span></a> is fairly close to the long-run estimate, though whether or not it is close <em>enough</em> depends on one’s needs of course. If you need great accuracy, deal many more hands.</p>
<p>A note on the <code>deck</code>s, <code>hand</code>s, <code>repeat_nos</code>s in the above program, etc.: These “variables” are called “array”s in Python. <span class="python">An <em>array</em></span> is an array (sequence) of elements that gets filled with numbers as Python conducts its operations.</p>
<p>To help keep things straight (though the program does not require it), we often use <code>z</code> to name the array that collects all the trial results, and <code>k</code> to denote our overall summary results. Or you could call it something like <code>scoreboard</code> — it’s up to you.</p>
<p>How many trials (hands) should be made for the estimate? There is no easy answer.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> One useful device is to run several (perhaps ten) equal sized sets of trials, and then examine whether the proportion of pairs found in the entire group of trials is very different from the proportions found in the various subgroup sets. If the proportions of pairs in the various subgroups differ greatly from one another or from the overall proportion, then keep running additional larger subgroups of trials until the variation from one subgroup to another is sufficiently small for your purposes. While such a procedure would be impractical using a deck of cards or any other physical means, it requires little effort with the computer and Python.</p>
</section>
<section id="two-more-tntroductory-poker-problems" class="level2" data-number="11.8">
<h2 data-number="11.8" class="anchored" data-anchor-id="two-more-tntroductory-poker-problems"><span class="header-section-number">11.8</span> Two more tntroductory poker problems</h2>
<p>Which is more likely, a poker hand with two pairs, or a hand with three of a kind? This is a <em>comparison</em> problem, rather than a problem in <em>absolute</em> estimation as was the previous example.</p>
<p>In a series of 100 “hands” that were “dealt” using random numbers, four hands contained two pairs, and two hands contained three of a kind. Is it safe to say, on the basis of these 100 hands, that hands with two pairs are more frequent than hands with three of a kind? To check, we deal another 300 hands. Among them we see fifteen hands with two pairs (3.75 percent) and eight hands with three of a kind (2 percent), for a total of nineteen to ten. Although the difference is not enormous, it is reasonably clear-cut. Another 400 hands might be advisable, but we shall not bother.</p>
<p>Earlier I obtained forty-four hands with <em>one</em> pair each out of 100 hands, which makes it quite plain that <em>one</em> pair is more frequent than <em>either</em> two pairs or three-of-a-kind. Obviously, we need <em>more</em> hands to compare the odds in favor of two pairs with the odds in favor of three-of-a-kind than to compare those for one pair with those for either two pairs or three-of-a-kind. Why? Because the difference in odds between one pair, and either two pairs or three-of-a-kind, is much greater than the difference in odds between two pairs and three-of-a-kind. This observation leads to a general rule: The closer the odds between two events, the <em>more trials</em> are needed to determine which has the higher odds.</p>
<p>Again it is interesting to compare the odds with the formulaic mathematical computations, which are 1 in 21 (4.75 percent) for a hand containing two pairs and 1 in 47 (2.1 percent) for a hand containing three-of-a-kind — not too far from the estimates of .0375 and .02 derived from simulation.</p>
<p>To handle the problem with the aid of the computer, we simply need to estimate the proportion of hands having triplicates and the proportion of hands with two pairs, and compare those estimates.</p>
<p>To estimate the hands with three-of-a-kind, we can use a notebook just like “One Pair” earlier, except using <code>repeat_nos == 3</code> to search for triplicates instead of duplicates. The program, then, is:</p>
<div class="notebook" name="three_of_a_kind" title="Three of a kind">
<p>Start of <code>three_of_a_kind</code> notebook</p>
<div class="nb-links">
<a class="notebook-link" href="notebooks/three_of_a_kind.ipynb">Download notebook</a>
<a class="interact-button" href="https://resampling-stats.github.io/python-book/interact/lab/index.html?path=three_of_a_kind.ipynb">Interact</a>
</div>

<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>rnd <span class="op">=</span> np.random.default_rng()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bucket (vector) called a with four "1's," four "2's," four "3's,"</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># etc., to represent a deck of cards</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>one_suit <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">14</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat values for one suit four times to make a 52 card deck of values.</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>deck <span class="op">=</span> np.repeat(one_suit, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>triples_per_trial <span class="op">=</span> np.zeros(<span class="dv">10000</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the following steps 10000 times</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10000</span>):</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Shuffle the deck</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> rnd.permuted(deck)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take the first five cards.</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    hand <span class="op">=</span> shuffled[:<span class="dv">5</span>]</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># How many triples?</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    repeat_nos <span class="op">=</span> np.bincount(hand)</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    n_triples <span class="op">=</span> np.<span class="bu">sum</span>(repeat_nos <span class="op">==</span> <span class="dv">3</span>)</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Keep score of # of triples</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    triples_per_trial[i] <span class="op">=</span> n_triples</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># End loop, go back and repeat</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a><span class="co"># How often was there 1 pair?</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>n_triples <span class="op">=</span> np.<span class="bu">sum</span>(triples_per_trial <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to proportion</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(n_triples <span class="op">/</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.0272</code></pre>
</div>
</div>
<p>End of <code>three_of_a_kind</code> notebook</p>
</div>
<p>To estimate the probability of getting a two-pair hand, we revert to the original program (counting pairs), except that we examine all the results in the score-keeping vector <code>z</code> for hands in which we had <em>two</em> pairs, instead of <em>one</em> .</p>
<div class="notebook" name="two_pairs" title="Two pairs">
<p>Start of <code>two_pairs</code> notebook</p>
<div class="nb-links">
<a class="notebook-link" href="notebooks/two_pairs.ipynb">Download notebook</a>
<a class="interact-button" href="https://resampling-stats.github.io/python-book/interact/lab/index.html?path=two_pairs.ipynb">Interact</a>
</div>

<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>rnd <span class="op">=</span> np.random.default_rng()</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>one_suit <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">14</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>deck <span class="op">=</span> np.repeat(one_suit, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>pairs_per_trial <span class="op">=</span> np.zeros(<span class="dv">10000</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the following steps 10000 times</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10000</span>):</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Shuffle the deck</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    shuffled <span class="op">=</span> rnd.permuted(deck)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take the first five cards.</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    hand <span class="op">=</span> shuffled[:<span class="dv">5</span>]</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># How many pairs?</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Counts for each card rank.</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    repeat_nos <span class="op">=</span> np.bincount(hand)</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    n_pairs <span class="op">=</span> np.<span class="bu">sum</span>(repeat_nos <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Keep score of # of pairs</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    pairs_per_trial[i] <span class="op">=</span> n_pairs</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># End loop, go back and repeat</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a><span class="co"># How often were there 2 pairs?</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>n_two_pairs <span class="op">=</span> np.<span class="bu">sum</span>(pairs_per_trial <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to proportion</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(n_two_pairs <span class="op">/</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.0487</code></pre>
</div>
</div>
<p>End of <code>two_pairs</code> notebook</p>
</div>
<p>For efficiency (though efficiency really is not important here because the computer performs its operations so cheaply) we could develop both estimates in a single program by simply generating 10000 hands, and count the number with three-of-a-kind and the number with two pairs.</p>
<p>Before we leave the poker problems, we note a difficulty with Monte Carlo simulation. The probability of a royal flush is so low (about one in half a million) that it would take much computer time to compute. On the other hand, considerable inaccuracy is of little matter. Should one care whether the probability of a royal flush is 1/100,000 or 1/500,000?</p>
</section>
<section id="the-concepts-of-replacement-and-non-replacement" class="level2" data-number="11.9">
<h2 data-number="11.9" class="anchored" data-anchor-id="the-concepts-of-replacement-and-non-replacement"><span class="header-section-number">11.9</span> The concepts of replacement and non-replacement</h2>
<p>In the poker example above, we <em>did not replace</em> the first card we drew. If we were to replace the card, it would leave the probability the same before the second pick as before the first pick. That is, the conditional probability remains the same. <em>If we replace, conditions do not change.</em> But if we do not replace the item drawn, the probability changes from one moment to the next. (Perhaps refresh your mind with the examples in the discussion of conditional probability including <a href="probability_theory_1b.html#sec-example-four-events" class="quarto-xref"><span>Section 9.1.1</span></a>)</p>
<p>If we sample with replacement, the sample drawings remain <em>independent</em> of each other — a topic addressed in <a href="probability_theory_1b.html#sec-independence" class="quarto-xref"><span>Section 9.1</span></a>.</p>
<p>In many cases, a key decision in modeling the situation in which we are interested is whether to sample with or without replacement. The choice must depend on the characteristics of the situation.</p>
<p>There is a close connection between the lack of finiteness of the concept of universe in a given situation, and sampling with replacement. That is, when the universe (population) we have in mind is not small, or has no conceptual bounds at all, then the probability of each successive observation remains the same, and this is modeled by sampling with replacement. (“Not finite” is a less expansive term than “infinite,” though one might regard them as synonymous.)</p>
<p><a href="probability_theory_3.html" class="quarto-xref"><span>Chapter 12</span></a> discusses problems whose appropriate concept of a universe is finite, whereas <a href="probability_theory_4_finite.html" class="quarto-xref"><span>Chapter 13</span></a> discusses problems whose appropriate concept of a universe is not finite. This general procedure will be discussed several times, with examples included.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>One simple rule-of-thumb is to quadruple the original number. The reason for quadrupling is that four times as many iterations (trials) of this resampling procedure give <em>twice</em> as much accuracy (as measured by the standard deviation, the most frequent measurement of accuracy). That is, the error decreases with the square root of the number of iterations. If you see that you need <em>much</em> more accuracy, then <em>immediately</em> increase the number of iterations even more than four times — perhaps ten or a hundred times.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./more_sampling_tools.html" class="pagination-link" aria-label="Two puzzles and more tools">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Two puzzles and more tools</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./probability_theory_3.html" class="pagination-link" aria-label="Probability Theory, Part 3">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Probability Theory, Part 3</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>